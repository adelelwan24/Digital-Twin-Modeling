{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block css %}
<style>
    .jumbotron {
        background-color: #e9ecef;
        padding: 2rem 1rem;
        margin-bottom: 2rem;
        border-radius: 0.3rem;
    }
    .example-section {
        margin-top: 2rem;
    }
    .example-section h2 {
        margin-bottom: 1.5rem;
    }
    .example {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }
    .example img {
        max-width: 100%;
        height: auto;
        border: 1px solid #dee2e6;
        border-radius: 0.3rem;
    }
    .example .model-viewer {
        width: 100%;
        height: 400px;
        border: 1px solid #dee2e6;
        border-radius: 0.3rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="jumbotron">
    <h1 class="display-4">Welcome to the 3D Model Viewer Project</h1>
    <p class="lead">This project allows you to upload, view, and interact with 3D models. You can also view available models and visualize them in a 3D space.</p>
    <hr class="my-4">
    <p>Use the navigation bar to explore different sections of the project.</p>
</div>

<div class="example-section">
    <h2>Example</h2>
    <div class="example row">
        <div class="col-md-6">
            <h3>Original Image</h3>
            <img src="{{ url_for('static', filename='images/example.jpg') }}" alt="Example Image">
        </div>
        <div class="col-md-6">
            <h3>3D Object</h3>
            <div class="model-viewer">
                <script type="importmap">
                    {
                      "imports": {
                        "three": "https://cdn.jsdelivr.net/npm/three@v0.166.1/build/three.module.js",
                        "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.166.1/examples/jsm/"
                      }
                    }
                </script>
                <script type="module">
                    import * as THREE from 'three';
                    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    document.querySelector('.model-viewer').appendChild(renderer.domElement);

                    const loader = new GLTFLoader();
                    loader.load('{{ url_for('static', filename='models/example_object.glb') }}', function(gltf) {
                        scene.add(gltf.scene);
                        renderer.render(scene, camera);
                    });

                    camera.position.z = 5;
                    
                    function animate() {
                        requestAnimationFrame(animate);
                        renderer.render(scene, camera);
                    }
                    animate();
                </script>
            </div>
        </div>
    </div>
</div>
{% endblock %}
